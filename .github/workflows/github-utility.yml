name: 'GitHub Utility'

on:
  workflow_dispatch:
    inputs:
      instructions:
        description: 'List of instructions for Github Utility to complete'
        type: string
        required: true
      file_type:
        description: 'Type of file being read in'
        type: choice
        options:
          - 'yaml'
          - 'json'
        required: true
      access_token:
        description: 'GitHub Api Access Token'
        type: string
        required: true

jobs:
  execute:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - name: Set up Python 3.10
      uses: actions/setup-python@v3
      with:
        python-version: "3.10"
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
    - name: Run Github Utilities
      run: |
        python main.py --instructions ${{ github.event.inputs.instructions }} --file_type ${{ github.event.inputs.file_type }} --access_token ${{ github.event.inputs.access_token }}